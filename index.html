<!-- Omar Costa Hamido to Music 51 [Winter 2020] (2020-02-05)-->
<!-- refs: 
	https://tonejs.github.io/examples/meter.html
	https://stackoverflow.com/questions/44360301/web-audio-api-creating-a-peak-meter-with-analysernode
-->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<!-- <title>Meter</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="icon" type="image/png" sizes="174x174" href="./favicon.png"> -->

	<script src="https://unpkg.com/@webcomponents/webcomponentsjs@^2/webcomponents-bundle.js"></script>
	<script src="https://tonejs.github.io/build/Tone.js"></script>
	<script src="https://tonejs.github.io/examples/js/tonejs-ui.js"></script>
</head>
<body>
	<style type="text/css">
		tone-meter {
			width: 100%;
			background-color: black;
			height: 100px;
			margin-bottom: 10px;
		}
	</style>
	<!-- <tone-example> -->
		<!-- <tone-loader></tone-loader> -->
		<!-- <tone-explanation label="Meter">
			<a href="https://tonejs.github.io/docs/Meter" target="_blank">Tone.Meter</a>
			gives you the level of the incoming signal in decibels.
		</tone-explanation> -->

		<tone-content>
			<tone-meter level color="#eee"></tone-meter>
			<tone-play-toggle></tone-play-toggle>
			Select a file: <input type="file" id="i_file" value=""><br><br>
		</tone-content>

		<tone-drawer>
			<tone-player collapsed></tone-player>
		</tone-drawer>
	<!-- </tone-example> -->

	<script type="text/javascript">
		$('#i_file').change( function(event) {
			var tmppath = URL.createObjectURL(event.target.files[0]);
			//the player
			var player = new Tone.Player({
			"url" : tmppath,
			"loop" : true
			}).toMaster();

			//bind the interface
			document.querySelector("tone-play-toggle").bind(player);
			document.querySelector("tone-meter").bind(player);
			document.querySelector("tone-player").bind(player);
		});
		// var player = new Tone.Player({
		// 	"url" : "./audio/FWDL.[mp3|ogg]",
		// 	"loop" : true
		// }).toMaster();

		// //bind the interface
		// document.querySelector("tone-play-toggle").bind(player);
		// document.querySelector("tone-meter").bind(player);
		// document.querySelector("tone-player").bind(player);
	</script>
</body>
</html>
