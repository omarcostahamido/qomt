<!-- Omar Costa Hamido to Music 51 (Winter 2020) -->
<!-- refs: 
	https://tonejs.github.io/examples/player.html
	https://www.w3schools.com/tags/att_input_type_file.asp
	https://stackoverflow.com/questions/15201071/how-to-get-full-path-of-selected-file-on-change-of-input-type-file-using-jav
	https://stackoverflow.com/questions/3489133/full-path-from-file-input-using-jquery#answer-3489167
	https://jsfiddle.net/dwebexperts/4FGg8/1/
	https://www.w3schools.com/jquery/event_change.asp 
-->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<!--<title>Player</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="icon" type="image/png" sizes="174x174" href="./favicon.png">-->

	<script src="https://unpkg.com/@webcomponents/webcomponentsjs@^2/webcomponents-bundle.js"></script>
	<script src="https://tonejs.github.io/build/Tone.js"></script>
	<script src="https://tonejs.github.io/examples/js/tonejs-ui.js"></script>
	<style type="text/css">
		tone-play-toggle {
			margin-bottom: 10px;
		}
	</style>
</head>
<body>
	<!-- <tone-example> -->
		<!--<tone-loader></tone-loader>

		<tone-explanation label="Player">
			Click on the button to play the audio file on loop
			using <a href="https://tonejs.github.io/docs/Player">Tone.Player</a>. 
		</tone-explanation>-->

		<tone-content>
			<tone-play-toggle></tone-play-toggle>
			<tone-player></tone-player>
<!-- 			<button>my gawd</button>
			<button onclick="myFunction()">Try it</button> -->
			Select a file: <input type="file" id="i_file" value=""><br><br>
		</tone-content>
	<!-- </tone-example> -->
	
	<script type="text/javascript">
		$('#i_file').change( function(event) {
			var tmppath = URL.createObjectURL(event.target.files[0]);
			//the player
			var player = new Tone.Player({
				"url" : tmppath,
				"loop" : true,
				"loopStart" : 0.5,
				"loopEnd" : 0.7,
			}).toMaster();

			//bind the interface
			document.querySelector("tone-player").bind(player);
			document.querySelector("tone-play-toggle").bind(player);
		});
		// function myFunction() {
		// 	//the file
		// 	//var myFile = document.getElementById("myFile").value;
		// 	//the player
		// 	var player = new Tone.Player({
		// 		"url" : tmppath,
		// 		//"url" : "http://drive.google.com/uc?export=download&id=1T4o4KtDBdTkSRM1-xXfAY728JbVS9Pom",
		// 		// "url" : "https://tonejs.github.io/examples/audio/FWDL.[mp3|ogg]",
		// 		"loop" : true,
		// 		"loopStart" : 0.5,
		// 		"loopEnd" : 0.7,
		// 	}).toMaster();

		// 	//bind the interface
		// 	document.querySelector("tone-player").bind(player);
		// 	document.querySelector("tone-play-toggle").bind(player);
		// }
	</script>

</body>
</html>
